---
import { Image } from "astro:assets"
import { Menu, X } from "@lucide/astro"

import Logo from "~/assets/image/logo.webp"
import ToggleDarkMode from "~/components/toggle/ToggleDarkMode.astro"
import ToggleLenguajes from "~/components/toggle/ToggleLenguajes.astro"
import { getLangFromUrl, getTranslatedPath, getTranslations } from "~/i18n/ui"

const lang = getLangFromUrl(Astro.url)
const t = getTranslations(lang)
const translatePath = getTranslatedPath(lang)

const navbarItems = [
	{ name: t("nav.home"), href: "#" },
	{ name: t("nav.experience"), href: "#experience" },
	{ name: t("nav.projects"), href: "#projects" },
	{ name: t("nav.education"), href: "#education" },
	{ name: t("nav.about"), href: "#about" },
	{ name: t("nav.contact"), href: "mailto:kevinvilleperez@gmail.com" },
]
---

<nav
  class="fixed top-0 left-0 w-full z-50 bg-white dark:bg-neutral-950 border-b border-black/10 dark:border-white/10"
>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo -->
      <div class="flex items-center shrink-0">
        <Image src={Logo} alt="Logo" class="h-10 w-10 rounded-full object-cover" />
      </div>

      <!-- Menú centrado (Desktop) -->
      <div class="hidden md:flex flex-1 justify-center gap-8">
        {
          navbarItems.map(item => (
            <a
              href={translatePath(item.href)}
              class="text-sm font-medium text-gray-800 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors"
            >
              {item.name}
            </a>
          ))
        }
      </div>

      <!-- Controles derecha -->
      <div class="flex items-center gap-3">
        <ToggleLenguajes />
        <ToggleDarkMode />

        <!-- Botón Mobile -->
        <button
          id="menu-btn"
          class="md:hidden text-gray-800 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors"
          aria-label="Abrir menú"
        >
          <Menu class="w-6 h-6" />
        </button>
      </div>
    </div>
  </div>

  <!-- Menú Mobile -->
  <div
    id="mobile-menu"
    class="hidden md:hidden bg-white dark:bg-neutral-950 border-t border-black/10 dark:border-white/10"
  >
    <div class="px-6 py-6 flex flex-col gap-4 text-center">
      {
        navbarItems.map(item => (
          <a
            href={item.href}
            class="text-base font-medium text-gray-800 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors"
          >
            {item.name}
          </a>
        ))
      }
    </div>
  </div>
</nav>

<script is:inline>
  const menuBtn = document.getElementById('menu-btn')
  const mobileMenu = document.getElementById('mobile-menu')

  menuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden')
  })
</script>
